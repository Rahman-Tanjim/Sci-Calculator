import tkinter as tk
from tkinter import messagebox
import math

# ウィンドウの作成
root = tk.Tk()
root.title("電卓")
root.geometry("400x600")

# エントリウィジェットの作成
entry = tk.Entry(root, width=28, font=("Arial", 24), bd=10, insertwidth=2, borderwidth=4)
entry.grid(row=0, column=0, columnspan=4)

def on_button_click(button):
    current_text = entry.get()

    if button == '=':
        try:
            result = eval(current_text())
            entry.delete(0, tk.END)
            entry.insert(tk.END, str(result))
        except Exception as e:
            messagebox.showerror("Error", "無効な入力です")
    elif button == 'C':
        entry.delete(0, tk.END)
    elif button in ['sin', 'cos', 'tan', 'log', 'sqrt']:
        try:
            if button == 'sqrt':
                result = math.sqrt(float(current_text))
            elif button == 'log':
                result = math.log10(float(current_text))
            else:
                func=getattr(math,button)
                result =func(math.radians(float(current_text)))
            entry.delete(0, tk.END)
            entry.insert(tk.END, str(result))
        except Exception as e:
            messagebox.showerror("Error", "無効な入力です")
    else:
        entry.insert(tk.END, button)

# ボタンのラベルと位置を定義
buttons = [
    '7', '8', '9', '/',
    '4', '5', '6', '*',
    '1', '2', '3', '-',
    '0', '.', '=', '+',
    'sin', 'cos', 'tan', 'log',
    'sqrt', 'C'
]

# ボタンの作成と配置
row = 1
col = 0
for button in buttons:
    def cmd(x=button):
        on_button_click(x)
    btn = tk.Button(root, text=button, padx=20, pady=20, font=("Arial", 18), command=cmd)
    btn.grid(row=row, column=col)
    col += 1
    if col > 3:
        col = 0
        row += 1

# メインループの開始
root.mainloop()# ここにコードを書いてね :-)
